{% extends "archetypes/_layout.html" %}

{% block moxfield -%}
ApQ-U-RjQU6qZiLGn5Q9Xw
{%- endblock %}

{% block bans %}
<p>
    {% trans trimmed %}
    Bien que la construction d'un deck doublement tribal puisse être très compliquée, avoir comme
    condition tribale le type de créature le plus imprimé de l'histoire du jeu et l'autre étant
    « n'importe quoi qui appartient au reste », ces conditions tribales ne sont pas la plus grande
    des contraintes de contruction. Avoir une créature puissante avec une force et une endurance de
    4/4 pour 4 manas est aussi une condition évaluée. Avoir un impact le tour où elle arrive en jeu
    (comme une sorte de « célérité améliorée ») nécessite aussi la vigilance de tout le monde, sans
    oublier que les objets trouvés dans la bibliothèques deviennent indestructibles (un mot-clé
    auparavant rare mais qui devient de plus en plus fréquent depuis une dizaine d'années, comme
    <em>Défense talismanique</em> ou <em>Linceul</em>, d'autres mot-clés peu interactifs). Enfin,
    elle n'a pas besoin de faire partie elle-même du combat pour avoir un impact.
    {% endtrans %}
</p>

<p>
    {% trans trimmed
        asmo_annonce=link(
            "/archetypes/decks-bannis/asmoranomardicadaistinaculdacar",
            card("Asmoranomardicadaistinaculdacar"),
            _anchor="ban"
        )
    %}
    Ces caractéristiques présentent donc un même problème que ceux
    d'{{ asmo_annonce }} : {{ winota_joiner_of_forces }} est
    un deck aggro-combo qui bénéficie d'une très grande supériorité par rapport à d'autres decks
    aggro tout en étant au moins assez bien positionné contre les autres archétypes. Aussi, la
    diversité du format est diminuée par ce fait et, suivant cette logique, le retrait
    d'Asmoranomardicadaistinaculdacar fait que Winota risque de devenir le prochain deck
    problématique.
    {% endtrans %}
</p>

<p>
    {% trans trimmed %}
    De tels commandants (ou cartes) oppressifs qui nécessitent une réponse immédiate, et le fait
    que les decks qui jouent ces cartes ont également quelques réponses de dernière chance aux
    réponses des adversaires ne sont pas vraiment ce qui crée de grandes expériences de jeu. Encore
    une fois, ici, être battu par des cartes révélées au hasard en haut des bibliothèques ne crée
    pas de sentiments très chaleureux de la part des personnes perdant face à ce genre de decks,
    surtout lorsque le prix payé pour le faire n'est pas vraiment une contrainte. Pour ces raisons,
    et après une performance continue et croissante des decks Winota, Joiner of Forces, nous avons
    choisi d'interdire cette carte en tant que commandant à partir de maintenant.
    {% endtrans %}
</p>
{% endblock %}

{# Contenu retiré suite au ban de Winota
{% block highlights %}
<p>
	{% trans trimmed %}
	Il s'agit d'un deck agressif qui se transforme en deck combo lorsque
	{{ winota_joiner_of_forces }} est sur le champ de bataille. En effet, sa capacité se déclenche
	pour chaque créature non-humaine qui est déclarée attaquante.
	{% endtrans %}
</p>
<p>
	{% trans trimmed %}
	Étant basée sur la structure d'un aggro classique, le deck se prend en main rapidement malgré
	la présence de plusieurs synergies discrètes qui permettent de renforcer la puissance du deck
	et l'expérience de jeu. Maitriser ces synergies permet d'accéder aisément aux tables hautes
	lors des tournois.
	{% endtrans %}
</p>
<p>
	{% trans trimmed
		hatebear=link("/cartes-thematiques/mecaniques-de-la-colorpie/les-cartes-de-taxe", "hatebears")
	%}
	Le rythme de la partie doit être dicté par ce deck. C'est aux créatures du deck d'installer une
	grosse pression (une <em>clock</em>) qui permet d'être l'agresseur rapidement. Il faut garder
	en tête que le deck joue des {{ hatebear }} qui permettent de ralentir le développement de
	l'adversaire.
	{% endtrans %}
</p>
<p>
	{% trans trimmed
		taxe=link("/cartes-thematiques/mecaniques-de-la-colorpie/les-cartes-de-taxe", "taxe"),
		aggro=link("/cartes-thematiques/mecaniques-de-la-colorpie/les-creatures-agressives", _("agressives")),
		blasts=link("/cartes-thematiques/mecaniques-de-la-colorpie/les-degats-directs", _("dégâts directs"))
	%}
	La combinaison de couleur <em>Boros</em> donne accès aux meilleures créatures de {{ taxe }} en
	blanc et les meilleures créatures {{ aggro }} en rouge tout en gardant {{ lightning_bolt }}
	pour des {{ blasts }}.
	{% endtrans %}
</p>

<h2>{{ _("Les Win-O-Maths") }}</h2>
<form class="inline-form" id="win-o-math" autocomplete="off"
	onsubmit="return calculate();">
	<fieldset id="win-o-val">
		<legend>{{ _("Probabilité de réussites successives") }}</legend>
		<span class="double-column">
			<label for="aL0_copies">{{ _("nombre d'humains :") }}</label>
			<input type="text" id="copies" placeholder="23" />
		</span>
		<span class="double-column">
			<label for="aL0_triggers">{{ _("nombre de réussites max :") }}</label>
			<input type="text" id="triggers" placeholder="5" />
		</span>
		<button type="submit" id="btn-calcul">{{ _("Calcul")}}</button>
		<div id="result"></div>
	</fieldset>
</form>
{% endblock %}

{% block script %}
{{ super() }}
<!-- Win-O-Math -->
<script>
	var calculate = function() {
		var hnps = function (n,p,s) { return 1 - hnpss(n,p,s,0) };
		var hnpss = function (n,p,s,e) {
			if (n > p) { n = p }
			let echooses = binom(s,e);
			let nechooseps = binom(p-s,n-e);
			let nchoosep = binom(p,n);
			return echooses * nechooseps / nchoosep;
		};
		var binom = function (n, k) {
			if ((k < 0) || (n < 0) || (k > n)) { return 0 }
			let resultat = 1;
			for (let i = 1; i < (Math.min(k, n-k) +1); i++) {
				resultat = resultat * (n + 1 - i) / i;
			}
			return resultat;
		};
		var pyx = function (y,x) {
			if (y == 0 && x == 0) { return 1 }
			if ((y > x) || (y < 0)) { return 0 }
			return pyx(y-1,x-1) * pryx(y-1,x-1) + pyx(y,x-1) * (1 - pryx(y,x-1));
		};
		var pryx = function (y,x) {
			if (pyx(y,x) == 0) { return 0 }
			let somme = 0;
			for (let s = 0; s <= x * N; s++) { somme += hnps(N,P - x * N,S - s) * pyxs(y,x,s) }
			return 1/pyx(y,x) * somme;
		};
		var pyxs = function (y,x,s) {
			if ((y > s) || (y > x)) { return 0 }
			if ((y == 0) && (s > 0)) { return 0 }
			if ((x == 0) && (y == 0) && (s == 0)) { return 1 }
			if ((x < 0) || (y < 0) || (s < 0)) { return 0 }
			let somme = 0;
			for (let i = 1; i <= N; i++) {
				somme += pyxs(y-1,x-1,s-i) * hnpss(N,P-(x-1)*N,S-s+i,i);
			}
			return somme + pyxs(y,x-1,s) * hnpss(N,P-(x-1)*N,S-s,0);
		};

		// Size of set
		var N = 6;
		// Success in population
		let copies = document.getElementById("copies");
		var S = parseInt(copies.value || copies.placeholder);
		// Size of deck
		var P = 99;

		// Triggers
		let triggers = document.getElementById("triggers");
		let max_triggers = triggers.value || triggers.placeholder;

		// parentNode
		var result = document.getElementById("result");
		while (result.firstChild) { result.removeChild(result.firstChild) }

		// Display
		for (let i = 0; i <= max_triggers; i++) {
			let str = "";
			str = str + "<strong>" + i + "</strong>" + " réussite";
			if (i > 1) { str = str + "s" }
			str = str + " : " + Math.round(pyx(i,max_triggers)*10000)/100+" %";
			let r = document.createElement("span");
			r.setAttribute('class', "double-column");
			r.innerHTML = str;
			result.appendChild(r);
		}

		// Prevent default submitting
		return false;
	}
</script>
{% endblock %}


{% block style %}
<style>
input {
	max-width: 3em;
	margin: 0 1.5em;
	text-align: center;
}
#btn-calcul {
	text-decoration: none;
	border: 1px;
	border-radius: 0.5em;
	border-color: #ec5354;
	border-style: solid;
	padding: 0.5em;
	margin: 1em auto;
	color: #ec5354;
	width: 47%;
	text-align: center;
	display: block;
}
#result {
	margin: 0;
	padding: 0.5em;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-evenly;
}
.double-column {
	display: inline-block;
	padding: 0.1em;
	vertical-align: top;
	margin: 0.1em;
	width: 47%;
	text-align: center;
}
@media only screen and (max-width: 750px) {
	.double-column {
		width: 100%;
		display: block;
	}
}
</style>
{% endblock %}
#}
